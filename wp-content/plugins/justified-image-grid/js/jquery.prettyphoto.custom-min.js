/* ------------------------------------------------------------------------
	Class: prettyPhoto
	Use: Lightbox clone for jQuery
	Author: Stephane Caron (http://www.no-margin-for-errors.com)
	Version: 3.1.5
	Customization: by Firsh for Justified Image Grid v2.2.2
------------------------------------------------------------------------- */
function loadJIGprettyPhoto(a){function J(){var a=!1,d;d=location.hash;d=d.replace("%5B","[");d=d.replace("%5D","]");d=d.replace(/([^|])(poster=|videoplayer)/mg,"$1|$2");d=d.match(/^#!?([\w\-[\]]+?\/(?:(\d+)(?=\/))?(https?:\/\/[^&]*)?([A-Z]{2}\/[_\w]*)?)/im);null!==d&&(a=d[1]);return a}function T(a){if("undefined"!=typeof theRel){var d=!1;if(1==settings.smart_deeplinking&&a){d="";a=a.eq(set_position);d=a.attr("class");-1===d.indexOf("jig-contentID")&&(d=a.closest(".jig-imageContainer").attr("class"));
d=/(?:jig-contentID)-(\w{2})-([^\s]*)/im.exec(d);null!=d&&(d=d[1]+"/"+d[2]);if(d){location.hash="!"+theRel+"/"+d;return}d=!0}location.hash=1==settings.advanced_deeplinking||1==d?"!"+theRel+"/"+pp_images[set_position]:theRel+"/"+rel_index+"/"}}function m(a,d){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var m=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(d);return null==m?"":m[1]}a.prettyPhoto={version:"3.1.5"};a.prettyPhoto.JIG=!0;a.fn.prettyPhoto=function(g){function d(){A=a(".jig_pp_pinterest").get(0).scrollWidth;
0!==A?(a(".jig_pp_pinterest").width(A),"undefined"!==typeof B&&clearTimeout(B)):30>K&&(B=setTimeout(function(){K++;d()},500))}function U(a,e){a=V(a);e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return a.replace(/\x3c!--[\s\S]*?--\x3e|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(a,b){return-1<e.indexOf("<"+b.toLowerCase()+">")?a:""})}function V(a,e){if(void 0===a)return"";var c=0,d=!1;"undefined"===typeof e&&(e=2);a=a.toString().replace(/&lt;/g,
"<").replace(/&gt;/g,">");var g={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};0===e&&(d=!0);if("number"!==typeof e){e=[].concat(e);for(var k=0,f=e.length;k<f;k+=1)0===g[e[k]]?d=!0:g[e[k]]&&(c|=g[e[k]]);e=c}e&g.ENT_HTML_QUOTE_SINGLE&&(a=a.replace(/&#0*39;/g,"'"));d||(a=a.replace(/&quot;/g,'"'));return a=a.replace(/&amp;/g,"&")}function C(){a(".pp_loaderIcon").hide();projectedTop=x.scrollTop+(t/2-c.containerHeight/2);0>projectedTop&&(projectedTop=
0);$ppt.fadeTo(settings.animation_speed,1);$pp_pic_holder.find(".pp_content").animate({height:c.imageHeight,width:c.imageWidth},settings.animation_speed);$pp_pic_holder.animate({top:projectedTop,left:0>r/2-c.containerWidth/2?0:r/2-c.containerWidth/2,width:c.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(c.height).width(c.width);$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);isSet&&"image"==D(pp_images[set_position])?
$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide();settings.allow_expand&&(c.resized?a("a.pp_expand,a.pp_contract").show():a("a.pp_expand").hide());!settings.autoplay_slideshow||u||E||a.prettyPhoto.startSlideshow();settings.changepicturecallback();E=!0});isSet&&settings.overlay_gallery&&"image"==D(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((c.containerWidth-100-
navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),
goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,a.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave");g.ajaxcallback();settings.social_tools&&~F&&d()}function L(b){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){a(".pp_loaderIcon").show();
b()})}function W(b){1<b?a(".pp_nav").show():a(".pp_nav").hide()}function n(a,e){M(a,e);var c=!1,d=r-50,g=t-40,k=a,f=e;if((v>d||w>g)&&l&&settings.allow_resize&&!y){var c=!0,h=!0;for(enoughPlease=!1;h;)v>d&&(k=Math.min(d,k)-20,f=e/a*k,200>k&&(k=200,f=e/a*k,enoughPlease=!0)),w>g&&(f=Math.min(g,f)-20,k=a/e*f,200>f&&(f=200,k=a/e*f,enoughPlease=!0)),M(k,f),h=0==enoughPlease&&(v>d||w>g)?!0:!1}z();return{width:Math.floor(k),height:Math.floor(f),containerHeight:Math.floor(w),containerWidth:Math.floor(v)+2*
settings.horizontal_padding,imageHeight:Math.floor(G),imageWidth:Math.floor(N),resized:c}}function M(b,e){b=parseFloat(b);e=parseFloat(e);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(b);var c=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),d="facebook"!==settings.theme?settings.theme:"pp_facebook";$pp_details=$pp_details.clone().addClass(d).width(b).appendTo(a("body")).css({position:"absolute",top:-1E4});c+=$pp_details.height();c=34>=c?36:c;
$pp_details.remove();$pp_title=$pp_pic_holder.find(".ppt");$pp_title.width(b);titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom"));$pp_title=$pp_title.clone().appendTo(a("body")).css({position:"absolute",top:-1E4});titleHeight+=$pp_title.height();$pp_title.remove();G=e+c;N=b;w=G+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();v=b}function D(a){return a.match(/\b\|videoplayer\b/i)?"videoplayer":a.match(/youtube\.com\/watch/i)||
a.match(/youtu\.be/i)?"youtube":a.match(/vimeo\.com/i)?"vimeo":a.match(/\b.mov\b/i)?"quicktime":a.match(/\b.swf\b/i)?"flash":a.match(/\biframe=true\b/i)?"iframe":a.match(/\bajax=true\b/i)?"ajax":a.match(/\bcustom=true\b/i)?"custom":"#"==a.substr(0,1)?"inline":"image"}function z(){if(l&&"undefined"!=typeof $pp_pic_holder){x=O();var a=$pp_pic_holder.height(),e=$pp_pic_holder.width();projectedTop=t/2+x.scrollTop-a/2;0>projectedTop&&(projectedTop=0);a>t||$pp_pic_holder.css({top:projectedTop,left:r/2+
x.scrollLeft-e/2})}}function O(){if(self.pageYOffset)return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};if(document.documentElement&&document.documentElement.scrollTop)return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};if(document.body)return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}function P(b){settings.markup=settings.markup.replace("{pp_social}","");a("body").append(settings.markup);$pp_pic_holder=a(".pp_pic_holder");
$ppt=a(".ppt");$pp_overlay=a("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(b=0;b<pp_images.length;b++)pp_images[b].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[b]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);$pp_gallery=a(".pp_pic_holder .pp_gallery");
$pp_gallery_li=$pp_gallery.find("li");$pp_gallery.find(".pp_arrow_next").click(function(){a.prettyPhoto.changeGalleryPage("next");a.prettyPhoto.stopSlideshow();return!1});$pp_gallery.find(".pp_arrow_previous").click(function(){a.prettyPhoto.changeGalleryPage("previous");a.prettyPhoto.stopSlideshow();return!1});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});itemWidth=
57;$pp_gallery_li.each(function(b){a(this).find("a").click(function(){a.prettyPhoto.changePage(b);a.prettyPhoto.stopSlideshow();return!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){a.prettyPhoto.startSlideshow();return!1}));$pp_pic_holder.attr("class","pp_pic_holder "+("facebook"!==settings.theme?settings.theme:"pp_facebook"));$pp_overlay.css({opacity:0,height:a(document).height(),
width:a(window).width()}).bind("click",function(){settings.modal||a.prettyPhoto.close()});a("a.pp_close").bind("click",function(){a.prettyPhoto.close();return!1});settings.allow_expand&&a("a.pp_expand").bind("click",function(b){a(this).hasClass("pp_expand")?(a(this).removeClass("pp_expand").addClass("pp_contract"),l=!1):(a(this).removeClass("pp_contract").addClass("pp_expand"),l=!0);L(function(){a.prettyPhoto.open()});return!1});$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",
function(){a.prettyPhoto.changePage("previous");a.prettyPhoto.stopSlideshow();return!1});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){a.prettyPhoto.changePage("next");a.prettyPhoto.stopSlideshow();return!1});z()}jigReCallPrettyPhotoAfterPossibleResize="undefined"===typeof g||"undefined"!==typeof g&&"undefined"===typeof g.jig_call?!0:void 0;g=jQuery.extend({jig_call:!1,jig_socials:"ftpg",videoplayer:!1,hook:"rel",advanced_deeplinking:!1,smart_deeplinking:!0,animation_speed:"fast",
ajaxcallback:function(){},slideshow:5E3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:300,keyboard_shortcuts:!0,analytics:!1,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> \t\t\t\t\t\t<div class="ppt">&nbsp;</div> \t\t\t\t\t\t<div class="pp_top"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_content_container"> \t\t\t\t\t\t\t<div class="pp_left"> \t\t\t\t\t\t\t<div class="pp_right"> \t\t\t\t\t\t\t\t<div class="pp_content"> \t\t\t\t\t\t\t\t\t<div class="pp_loaderIcon"></div> \t\t\t\t\t\t\t\t\t<div class="pp_fade"> \t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_expand" title="Expand the image">Expand</a> \t\t\t\t\t\t\t\t\t\t<div class="pp_hoverContainer"> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_next" href="#">next</a> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_previous" href="#">previous</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t<div id="pp_full_res"></div> \t\t\t\t\t\t\t\t\t\t<div class="pp_details"> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_nav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t\t\t\t\t\t<p class="currentTextHolder">0/0</p> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<p class="pp_description"></p> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_social">{pp_social}</div> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_close" href="#">Close</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_bottom"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<div class="pp_overlay"></div>',
gallery_markup:'<div class="pp_gallery"> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t<div> \t\t\t\t\t\t\t\t\t<ul> \t\t\t\t\t\t\t\t\t\t{gallery} \t\t\t\t\t\t\t\t\t</ul> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',
quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no" allowfullscreen></iframe>',
inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:!0,jig_facebook:'<div class="jig_pp_social_btn jig_pp_facebook"><iframe src="//www.facebook.com/plugins/like.php?href={f_location_href}&amp;width=135&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=true&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:135px; height:21px;" allowTransparency="true"></iframe></div>',jig_twitter:'<div class="jig_pp_social_btn jig_pp_twitter"><a href="http://twitter.com/share?url=https%3A%2F%2Fdev.twitter.com%2Fdocs%2Ftweet-button" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js">\x3c/script></div>',
jig_pinterest:'<div class="jig_pp_social_btn jig_pp_pinterest"><a href="//www.pinterest.com/pin/create/button/?url={location_href}&media={location_img}&description={location_dec}" class="pin-it-button" data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a><script type="text/javascript">window["jigBuildPinterestButton"](jQuery(".jig_pp_pinterest")[0]);\x3c/script></div>',jig_google:'<div class="jig_pp_social_btn jig_pp_google"><g:plusone size="medium" annotation="none" href="{g_location_href}"></g:plusone><script type="text/javascript">(function(){var po = document.createElement("script");po.type = "text/javascript"; po.async = true;po.src = "https://apis.google.com/js/plusone.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(po, s);})();\x3c/script></div>'},
g);!1===g.jig_call&&!0===g.smart_deeplinking&&!0===g.deeplinking&&(g.smart_deeplinking=!1,g.advanced_deeplinking=!0);if(g.social_tools){var f=g.jig_socials,f=f.toLowerCase(),f=f.split(""),Q=a.inArray("f",f),R=a.inArray("t",f),F=a.inArray("p",f),S=a.inArray("g",f);~Q&&(f[Q]=g.jig_facebook);~R&&(f[R]=g.jig_twitter);~F&&(f[F]=g.jig_pinterest);~S&&(f[S]=g.jig_google);g.social_tools=f.join("")}var q=this,y=!1,c,E,G,N,w,v,t=a(window).height(),r=a(window).width(),u,l=!0,x=O();-1==q.selector.indexOf("#jig")&&
(q=q.filter(":not(.justified-image-grid a)"));g.matchedObjects=q;a(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){z();t=a(window).height();r=a(window).width();"undefined"!=typeof $pp_overlay&&$pp_overlay.height(a(document).height()).width(r)});g.keyboard_shortcuts&&a(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(b){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(b.keyCode){case 37:a.prettyPhoto.changePage("previous");
b.preventDefault();break;case 39:a.prettyPhoto.changePage("next");b.preventDefault();break;case 27:settings.modal||a.prettyPhoto.close(),b.preventDefault()}});a.prettyPhoto.initialize=function(){settings=g;"pp_default"==settings.theme&&(settings.horizontal_padding=16);theRel=a(this).attr(settings.hook);(isSet=/\[(?:.*)\]/.exec(theRel)?!0:!1)?(pp_images=jQuery.map(q,function(b,c){if(a(b).attr(settings.hook)&&-1!=a(b).attr(settings.hook).indexOf(theRel))return a(b).attr("href")}),pp_titles=jQuery.map(q,
function(b,c){if(a(b).attr(settings.hook)&&-1!=a(b).attr(settings.hook).indexOf(theRel))return a(b).find("img").attr("alt")?a(b).find("img").attr("alt"):""}),pp_descriptions=jQuery.map(q,function(b,c){if(a(b).attr(settings.hook)&&-1!=a(b).attr(settings.hook).indexOf(theRel))return a(b).attr("title")?a(b).attr("title"):""})):(pp_images=a.makeArray(a(this).attr("href")),pp_titles=a.makeArray(a(this).find("img").attr("alt")),pp_descriptions=a.makeArray(a(this).attr("title")));pp_images.length>settings.overlay_gallery_max&&
(settings.overlay_gallery=!1);set_position=jQuery.inArray(a(this).attr("href"),pp_images);rel_index=isSet?set_position:a("a["+settings.hook+"^='"+theRel+"']").index(a(this));P(this);settings.allow_resize&&a(window).bind("scroll.prettyphoto",function(){z()});a.prettyPhoto.open();return!1};a.prettyPhoto.open=function(b,e,d,f){"undefined"==typeof settings&&(settings=g,pp_images=a.makeArray(b),pp_titles=e?a.makeArray(e):a.makeArray(""),pp_descriptions=d?a.makeArray(d):a.makeArray(""),isSet=1<pp_images.length?
!0:!1,set_position=f?f:0,P(b.target));settings.hideflash&&a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden");W(a(pp_images).size());a(".pp_loaderIcon").show();settings.deeplinking&&T(settings.matchedObjects);1==settings.analytics&&"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Photos","View",pp_images[set_position]]);1==settings.advanced_deeplinking||1==settings.smart_deeplinking?(e=decodeURI(document.location.href),b=e.split("#!"),e=b[0]+"#!"+b[1]):e=location.href;
settings.social_tools&&(b=settings.social_tools.replace(/{location_href}/g,encodeURIComponent(location.href)),b=b.replace(/{g_location_href}/g,location.href),b=b.replace("{f_location_href}",encodeURIComponent(e.replace("#!",(-1===e.indexOf("?")?"?":"&")+"_escaped_fragment_="))),b=b.replace(/{t_location_href}/g,encodeURIComponent(location.href.replace(/\|(poster|videoplayer)/ig,"$1"))),e=/(?:poster=)(.*)(?:\|videoplayer)/m.exec(pp_images[set_position]),b=null==e?b.replace(/{location_img}/g,encodeURIComponent(pp_images[set_position])):
b.replace(/{location_img}/g,encodeURIComponent(e[1])),"undefined"!==typeof pp_descriptions[set_position]&&(b=b.replace(/{location_dec}/g,encodeURIComponent(U(pp_descriptions[set_position].replace(/<a(?:.+?)href=['"](.+?)['"](?:.+?>)(.+?)(?:<\/a>)/mg,"$2: $1"))))),$pp_pic_holder.find(".pp_social").html(b));$ppt.is(":hidden")&&$ppt.css("opacity",0).show();$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+
a(pp_images).size());"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(pp_descriptions[set_position]):$pp_pic_holder.find(".pp_description").hide();var h=parseFloat(m("width",pp_images[set_position]))?m("width",pp_images[set_position]):settings.default_width.toString(),k=parseFloat(m("height",pp_images[set_position]))?m("height",pp_images[set_position]):settings.default_height.toString();y=!1;-1!=k.indexOf("%")&&
(k=parseFloat(a(window).height()*parseFloat(k)/100-150),y=!0);-1!=h.indexOf("%")&&(h=parseFloat(a(window).width()*parseFloat(h)/100-150),y=!0);$pp_pic_holder.fadeIn(function(){settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?$ppt.html(pp_titles[set_position]):$ppt.html("&nbsp;");var b="",e=!1;switch(D(pp_images[set_position])){case "image":var b=new Image,d=new Image;isSet&&set_position<a(pp_images).size()-1&&(d.src=pp_images[set_position+1]);d=new Image;
isSet&&pp_images[set_position-1]&&(d.src=pp_images[set_position-1]);$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);b.onload=function(){c=n(b.width,b.height);C()};b.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");a.prettyPhoto.close()};b.src=pp_images[set_position];break;case "youtube":c=n(h,k);movie_id=m("v",pp_images[set_position]);""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),
movie_id=movie_id[1],0<movie_id.indexOf("?")&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),0<movie_id.indexOf("&")&&(movie_id=movie_id.substr(0,movie_id.indexOf("&"))));movie="http://www.youtube.com/embed/"+movie_id;m("rel",pp_images[set_position])?movie+="?rel="+m("rel",pp_images[set_position]):movie+="?rel=1";settings.autoplay&&(movie+="&autoplay=1");toInject=settings.iframe_markup.replace(/{width}/g,c.width).replace(/{height}/g,c.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,
movie);break;case "vimeo":c=n(h,k);movie_id=pp_images[set_position];d=movie_id.match(/https?:\/\/(?:www\.)?vimeo\.com\/(?:(\d+)|channels\/\w+?\/(\d+))/m);movie="http://player.vimeo.com/video/"+(d[1]|d[2])+"?title=0&amp;byline=0&amp;portrait=0";settings.autoplay&&(movie+="&autoplay=1;");vimeo_width=c.width+"/embed/?moog_width="+c.width;toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,c.height).replace(/{path}/g,movie);break;case "quicktime":c=n(h,k);c.height+=15;
c.imageHeight+=15;c.containerHeight+=15;toInject=settings.quicktime_markup.replace(/{width}/g,c.width).replace(/{height}/g,c.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case "flash":c=n(h,k);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));
toInject=settings.flash_markup.replace(/{width}/g,c.width).replace(/{height}/g,c.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case "iframe":c=n(h,k);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,c.width).replace(/{height}/g,c.height).replace(/{path}/g,frame_url);break;case "videoplayer":c=n(h,k);frame_url=pp_images[set_position];!1!==settings.videoplayer&&
(frame_url=settings.videoplayer+frame_url.substr(0,frame_url.indexOf("|videoplayer")).replace(/\|/,"&"));toInject=settings.iframe_markup.replace(/{width}/g,c.width).replace(/{height}/g,c.height).replace(/{path}/g,frame_url);break;case "ajax":l=!1;c=n(h,k);e=l=!0;a.get(pp_images[set_position],function(a){toInject=settings.inline_markup.replace(/{content}/g,a);$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;C()});break;case "custom":c=n(h,k);toInject=settings.custom_markup;break;case "inline":myClone=
a(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(a("body")).show(),l=!1,c=n(a(myClone).width(),a(myClone).height()),l=!0,a(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,a(pp_images[set_position]).html())}b||e||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,C())});return!1};a.prettyPhoto.changePage=function(b){currentGalleryPage=0;"previous"==
b?(set_position--,0>set_position&&(set_position=a(pp_images).size()-1)):"next"==b?(set_position++,set_position>a(pp_images).size()-1&&(set_position=0)):set_position=b;rel_index=set_position;l||(l=!0);settings.allow_expand&&a(".pp_contract").removeClass("pp_contract").addClass("pp_expand");L(function(){a.prettyPhoto.open()})};a.prettyPhoto.changeGalleryPage=function(a){"next"==a?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==a?(currentGalleryPage--,0>currentGalleryPage&&
(currentGalleryPage=totalPage)):currentGalleryPage=a;slide_speed="next"==a||"previous"==a?settings.animation_speed:0;slide_to=currentGalleryPage*itemsPerPage*itemWidth;$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)};a.prettyPhoto.startSlideshow=function(){"undefined"==typeof u?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){a.prettyPhoto.stopSlideshow();return!1}),u=setInterval(a.prettyPhoto.startSlideshow,settings.slideshow)):
a.prettyPhoto.changePage("next")};a.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){a.prettyPhoto.startSlideshow();return!1});clearInterval(u);u=void 0};a.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(a.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){a(this).remove()}),
$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible");a(this).remove();a(window).unbind("scroll.prettyphoto");if("undefined"!=typeof theRel){var b;b=location.hash;var c=theRel.replace("[",")\\["),c=c.replace("]","\\]");-1===c.indexOf(")")&&(c+=")");b=b.match(new RegExp("^#(!?"+c+"/(\\d+?/)?(https?://.*)?([A-Z]{2}/[_w]*)?"));null!==b&&(location.hash=b[1])}settings.callback();l=!0;E=!1;delete settings}))};
var B,K=0,A=0;if(!pp_alreadyInitialized&&J()&&1==g.jig_call){var H,I,p,h,s,f=!1;pp_alreadyInitialized=!0;h=J();s=h.substring(0,h.indexOf("/"));h=h.substring(h.indexOf("/")+1,h.length);/^([A-Z]{2}\/[_\w]*)$/im.test(h)?(h=h.replace("/","-"),p=a(".jig-contentID-"+h).find("a["+g.hook+"^='"+s+"']"),0===p.length&&(p=a("a["+g.hook+"^='"+s+"'].jig-contentID-"+h)),0!==p.length?(a(window).one("jigPrettyPhotoActivation",function(){delete jigOtherPrettyPhotoIsPresent;p.trigger("click")}),f=!1):f=!0):f=!0;1==
f&&(f=/(^\d+)?\/?(https?:\/\/.+$)/,p=h.match(f),null!==p?(h=p[1],I=p[2],a(window).one("jigPrettyPhotoActivation",function(){delete jigOtherPrettyPhotoIsPresent;H=a("a["+g.hook+"^='"+s+"']").eq(h);H.attr("href")!==I?a("a["+g.hook+"^='"+s+"'][href^='"+I+"']").trigger("click"):H.trigger("click")}),f=!1):f=!0);1==f&&setTimeout(function(){a("a["+g.hook+"^='"+s+"']").eq(h).trigger("click")},50)}return q.unbind("click.prettyphoto").bind("click.prettyphoto",a.prettyPhoto.initialize)}}
(function(){"undefined"!==typeof jQuery.prettyPhoto&&(jigOtherPrettyPhotoIsPresent=!0);loadJIGprettyPhoto(jQuery);pp_alreadyInitialized=!1})();