/*
* Justified Image Grid - Aligns your images into a Flickr / Google+ style thumbnail-grid gallery
* Version 2.2.2
*
* Copyright (c) 2012-2014 Firsh, http://www.justifiedgrid.com/
*/
function loadJustifiedImageGrid(d){d.justifiedImageGrid=function(v,z){function q(a,c){return"hasOwnProperty"in a?a.hasOwnProperty(c):Object.prototype.hasOwnProperty.call(a,c)}function l(b,c){b=t(b);if("below"==a.caption)return b;c=(((c||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return b.replace(/\x3c!--[\s\S]*?--\x3e|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(a,b){return-1<c.indexOf("<"+b.toLowerCase()+">")?a:""})}function t(a,c){if(void 0===
a)return"";var e=0,f=!1;"undefined"===typeof c&&(c=2);a=a.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");var d={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};0===c&&(f=!0);if("number"!==typeof c){c=[].concat(c);for(var g=0,m=c.length;g<m;g+=1)0===d[c[g]]?f=!0:d[c[g]]&&(e|=d[c[g]]);c=e}c&d.ENT_HTML_QUOTE_SINGLE&&(a=a.replace(/&#0*39;/g,"'"));f||(a=a.replace(/&quot;/g,'"'));return a=a.replace(/&amp;/g,"&")}function r(b){"undefined"!==typeof b&&
b.stopPropagation();b=a.element.find(".jig-overflow > a.jig-loaded").length;var c=a.element.find(".jig-imageContainer .jig-overflow > a").length;"no"==a.errorChecking&&(c-=5);"undefined"!==typeof a.loadCheckTimeout&&clearTimeout(a.loadCheckTimeout);b<c?(a.loadCheckTimeout=setTimeout(function(){r()},500),a.loadMoreButton.animate({opacity:.5},300)):(a.loadMoreButton.animate({opacity:1},300),a.limit+=a.originalLimit,a.loadMoreCounter++,"once"==a.loadMore&&(a.limit=a.allItems.length),w.createGallery())}
var k={targetHeight:190,heightDeviation:40,aspectRatio:"",disableCropping:"",randomizeWidth:"",margins:4,animSpeed:300,limit:0,maxRows:"",linkClass:"",linkRel:"auto",linkAttributeName:"",linkAttributeValue:"",linkAttribute:"",linkTitleField:"description",imgAltField:"title",wrapText:"no",readingDirection:"ltr",loadMore:"off",loadMoreText:"Load more",loadMoreCountText:"(*count* images remaining)",loadMoreAutoWidth:"on",disableHover:"no",downloadLink:"no",lightboxLink:"no",verticalCenterCaptions:"off",
customFonts:"yes",captionHeight:54,quality:90,retinaReady:"yes",retinaQuality:"auto",minRetinaQuality:30,maxRetinaDensity:3,caption:"fade",captionMatchWidth:"no",captionMatchWidthForceNo:!1,titleField:"title",captionField:"description",lightbox:"prettyphoto",lightboxInit:"jigAddLightbox1",overlay:"hovered",overlayIcon:"off",bordersTotal:0,innerBorder:"always",innerBorderWidth:0,innerBorderAnimate:"width",middleBorder:"always",middleBorderWidth:0,middleBorderColor:"white",outerBorder:"always",outerBorderColor:"black",
specialFx:"off",specialFxType:"desaturate",specialFxOptions:"",specialFxBlend:1,incompleteLastRow:"normal",errorChecking:"yes",retryCount:0,resizeCount:0,errorChecked:!1,errorImages:[],filters:!1,filterMultiple:"no",filterStyle:"buttons",L2filters:!1,L2FilterMultiple:"no",L2FilterStyle:"buttons",filterSmallestColor:"#A3A3A3",filterSmallestSize:11,filterLargestColor:"#000000",filterLargestSize:22,separatorCharacter:" - ",cropZone:"",instance:1,element:d(v),lastWindowWidth:d(window).width()},w=this,
a=d.extend({},k,z),H=!jQuery.support.opacity,D=!!window.chrome&&!/opera|opr/i.test(navigator.userAgent);this.s=a;w.init=function(){a.minHeight=a.targetHeight-a.heightDeviation;a.maxHeight=a.targetHeight+a.heightDeviation;a.defaultHeightRatio=a.targetHeight/a.maxHeight;a.originalLimit=a.limit;a.hiddenOpacity=H?.01:0;if("no"!==a.lightbox&&"links-off"!==a.lightbox&&"new_tab"!==a.lightbox)switch(a.hiddenLinkClass=""!==a.linkClass?'class="jig-link jig-hiddenLink '+a.linkClass+'" ':'class="jig-link jig-hiddenLink" ',
a.linkClass=""!==a.linkClass?'class="jig-link '+a.linkClass+'" ':'class="jig-link" ',a.linkRel){case "":a.linkRel="";break;default:switch(a.lightbox){case "prettyphoto":a.linkRel='rel="'+a.linkRel.replace("auto","prettyPhoto["+a.instance+"]")+'" ';break;case "colorbox":a.linkRel='rel="'+a.linkRel.replace("auto","colorBox["+a.instance+"]")+'" ';break;default:a.linkRel='rel="'+a.linkRel.replace("auto","gallery["+a.instance+"]")+'" '}}else a.linkClass="",a.hiddenLinkClass="",a.linkRel="";""!==a.linkAttributeName&&
(a.linkAttribute=""!==a.linkAttributeValue?" "+a.linkAttributeName+'="'+a.linkAttributeValue+'"':" "+a.linkAttributeName+'=""');a.allItems=a.selectedItems=a.items.slice();a.aspectRatio&&(a.maxWidth=Math.floor(a.maxHeight*parseFloat(a.aspectRatio)),"normal"==a.incompleteLastRow&&(a.incompleteLastRow="match","off"!==a.loadMore&&(a.incompleteLastRow="flexible-match")));"yes"==a.retinaReady&&("undefined"===typeof window.devicePixelRatio||1==window.devicePixelRatio?(a.retinaReady="no",a.devicePixelRatio=
1):a.devicePixelRatio=window.devicePixelRatio>a.maxRetinaDensity?a.maxRetinaDensity:window.devicePixelRatio);"yes"==a.retinaReady&&("auto"==a.retinaQuality?(a.quality=Math.ceil(a.quality/a.devicePixelRatio),a.quality=a.quality>a.minRetinaQuality?a.quality:a.minRetinaQuality):a.quality=a.retinaQuality);"yes"==a.disableCropping&&(a.minHeight=50);"captions"==a.specialFx&&"below"==a.caption&&(a.specialFx="off");if("yes"==a.customFonts&&"off"!==a.caption&&("below"==a.caption||"off"!==a.verticalCenterCaptions||
"captions"==a.specialFx)){var b=d("body").find(".jig-fontCheck");if(0===b.length){d("body").append('<div class="jig-fontCheck">!"\'\\#$%&amp;()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_abcdefghijklmnopqrstuvwxyz{|}~ A quick brown fox jumps over the lazy dog.</div>');var b=d("body").find(".jig-fontCheck"),c=b.width(),e=0,f=setInterval(function(){e++;var a=b.width();c==a||0===a?50<e&&(b.remove(),clearInterval(f)):(d("body").trigger("jig-fontLoaded"),b.remove(),clearInterval(f))},100)}}if(a.filters||
a.L2filters){a.filteredImages=[];if(a.filters){a.filterMultiple=a.filterMultiple||"no";a.filterStyle=a.filterStyle||"buttons";var h,g;"buttons"==a.filterStyle?(a.filterType="Button",h="div"):(a.filterType="Tag",h="span");var m='<div id="jig'+a.instance+"-filter"+a.filterType+'s" class="jig-filter'+a.filterType+"s "+("no"!==a.filterMultiple?"jig-filterMultiple ":"jig-filterSingle ")+'jig-clearfix" data-filter-level="1">';for(g in a.filters)q(a.filters,g)&&(a.filteredImages[g]=[],m+="<"+h+' class="jig-filter'+
a.filterType+'" data-filter-slug="'+g+'">'+a.filters[g]+"</"+h+">");a.element.before(m+"</div>");"undefined"!==typeof a.filteredImages["all-items-nofilter"]&&(a.filteredImages["all-items-nofilter"]=a.selectedItems.slice());h=0;for(m=a.selectedItems.length;h<m;h+=1)if(a.selectedItems[h].filters)for(var s=0,k=a.selectedItems[h].filters.length;s<k;s+=1)"undefined"!==typeof a.filteredImages[a.selectedItems[h].filters[s][0]]&&a.filteredImages[a.selectedItems[h].filters[s][0]].push(a.selectedItems[h]);
h=d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType+'[data-filter-slug="all-items-nofilter"]');0<h.length&&d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType).first().attr("data-filter-slug")!==h.attr("data-filter-slug")&&h.parent().prepend(h);if("tags"==a.filterStyle){for(g in a.filters)q(a.filters,g)&&d("#jig"+a.instance+"-filter"+a.filterType+'s .jig-filterTag[data-filter-slug="'+g+'"]').attr("rel",a.filteredImages[g].length);d.fn.tagcloud.defaults={size:{start:a.filterSmallestSize,
end:a.filterLargestSize,unit:"px"},color:{start:a.filterSmallestColor,end:a.filterLargestColor}};0<h.length?(h.css({"font-size":a.filterLargestSize,color:a.filterLargestColor}),d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType+":gt(0)").tagcloud()):d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType).tagcloud()}d("#jig"+a.instance+"-filter"+a.filterType+"s").on("click",".jig-filter"+a.filterType,L)}if(a.L2filters){a.L2filterMultiple=a.L2filterMultiple||"no";
a.L2filterStyle=a.L2filterStyle||"buttons";var p;"buttons"==a.L2filterStyle?(a.L2filterType="Button",g="div"):(a.L2filterType="Tag",g="span");a.L2filteredImages=[];h='<div id="jig'+a.instance+"-L2filter"+a.L2filterType+'s" class="jig-filter'+a.L2filterType+"s "+("no"!==a.L2filterMultiple?"jig-filterMultiple ":"jig-filterSingle ")+'jig-clearfix" data-filter-level="2">';for(p in a.L2filters)q(a.L2filters,p)&&(a.L2filteredImages[p]=[],h+="<"+g+' class="jig-filter'+a.L2filterType+'" data-filter-slug="'+
p+'">'+a.L2filters[p]+"</"+g+">");a.element.before(h+"</div>");"undefined"!==typeof a.L2filteredImages["all-items-nofilter"]&&(a.L2filteredImages["all-items-nofilter"]=a.selectedItems.slice());g=0;for(h=a.selectedItems.length;g<h;g+=1)if(a.selectedItems[g].L2filters)for(m=0,s=a.selectedItems[g].L2filters.length;m<s;m+=1)"undefined"!==typeof a.L2filteredImages[a.selectedItems[g].L2filters[m][0]]&&a.L2filteredImages[a.selectedItems[g].L2filters[m][0]].push(a.selectedItems[g]);g=d("#jig"+a.instance+
"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType+'[data-filter-slug="all-items-nofilter"]');0<g.length&&d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType).first().attr("data-filter-slug")!==g.attr("data-filter-slug")&&g.parent().prepend(g);if("tags"==a.L2filterStyle){for(p in a.L2filters)q(a.L2filters,p)&&d("#jig"+a.instance+"-L2filter"+a.L2filterType+'s .jig-filterTag[data-filter-slug="'+p+'"]').attr("rel",a.L2filteredImages[p].length);d.fn.tagcloud.defaults=
{size:{start:a.filterSmallestSize,end:a.filterLargestSize,unit:"px"},color:{start:a.filterSmallestColor,end:a.filterLargestColor}};0<g.length?(g.css({"font-size":a.filterLargestSize,color:a.filterLargestColor}),d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType+":gt(0)").tagcloud()):d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType).tagcloud()}d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s").on("click",".jig-filter"+a.L2filterType,L)}L()}else w.createGallery();
var n=p=function(){return!1},l=p,I=p,v=p,A=p,B=p,r=p,t=p,x=p,y=p,z=p,D=p,u=function(b,c,e,f){if("captions"!==a.specialFx||".jig-caption-wrapper .jig-caption"!==c)b.find(c).hoverFlow(e,{opacity:f},a.animSpeed);else{b=b.find(c);var g=J(b,!0);b.hoverFlow(e,{opacity:f},{duration:a.animSpeed,progress:function(){0!==d(this).closest(".jig-cw-role-real").length&&K(g)}})}},E=function(b,c,e,f){if("captions"!==a.specialFx)b.find(c).hoverFlow(e,{height:f},a.animSpeed);else{b=b.find(c);var g=J(b);b.hoverFlow(e,
{height:f},{duration:a.animSpeed,progress:function(){0!==d(this).closest(".jig-cw-role-real").length&&K(g)}})}},F=function(b,c,e,f){if("captions"!==a.specialFx)b.find(c).hoverFlow(e,{height:f},{duration:a.animSpeed,progress:function(){var a=b.find(".jig-caption-wrapper"),c=b.parent();a.css("top",Math.round(c.height()/2-a.height()/2))}});else{var g=b.find(c),h=J(g),m=g.closest(".jig-caption");b.find(c).hoverFlow(e,{height:f},{duration:a.animSpeed,progress:function(){var a=b.find(".jig-caption-wrapper"),
c=b.parent();a.css("top",Math.round(c.height()/2-m.height()/2));0!==d(this).closest(".jig-cw-role-real").length&&K(h)},complete:function(){"slide"!=a.caption&&"reverse-slide"!=a.caption||"hide"!=f||b.find(".jig-cw-role-effect").height(0)}})}},G=function(b,c,e,f){b.find(c).hoverFlow(e,{opacity:f},a.animSpeed)},C=function(b,c,e,f){b.find(c).hoverFlow(e,{borderLeftWidth:a.innerBorderWidth+"px",borderTopWidth:a.innerBorderWidth+"px",borderRightWidth:a.innerBorderWidth+"px",borderBottomWidth:a.innerBorderWidth+
"px"},a.animSpeed)};switch(a.overlay){case "hovered":"on"===a.overlayIcon?(n=function(a){u(a,"div.jig-overlay-wrapper, div.jig-overlay-icon-wrapper","mouseenter","show")},l=function(a){u(a,"div.jig-overlay-wrapper, div.jig-overlay-icon-wrapper","mouseleave","hide")}):(n=function(a){u(a,"div.jig-overlay-wrapper","mouseenter","show")},l=function(a){u(a,"div.jig-overlay-wrapper","mouseleave","hide")});break;case "others":"on"===a.overlayIcon?(n=function(a){u(a,"div.jig-overlay-wrapper, div.jig-overlay-icon-wrapper",
"mouseenter","hide")},l=function(a){u(a,"div.jig-overlay-wrapper, div.jig-overlay-icon-wrapper","mouseleave","show")}):(n=function(a){u(a,"div.jig-overlay-wrapper","mouseenter","hide")},l=function(a){u(a,"div.jig-overlay-wrapper","mouseleave","show")})}switch(a.innerBorder){case "hovered":switch(a.innerBorderAnimate){case "width":r=function(b){C(b,"div.jig-border","mouseenter",a.innerBorderWidth+"px")};t=function(a){C(a,"div.jig-border","mouseleave",0)};break;case "opacity":r=function(a){u(a,"div.jig-border",
"mouseenter","show")};t=function(a){u(a,"div.jig-border","mouseleave","hide")};break;case "off":r=function(a){d(a).find("div.jig-border").show()},t=function(a){d(a).find("div.jig-border").hide()}}break;case "others":switch(a.innerBorderAnimate){case "width":r=function(a){C(a,"div.jig-border","mouseenter",0)};t=function(b){C(b,"div.jig-border","mouseleave",a.innerBorderWidth+"px")};break;case "opacity":r=function(a){u(a,"div.jig-border","mouseenter","hide")};t=function(a){u(a,"div.jig-border","mouseleave",
"show")};break;case "off":r=function(a){d(a).find("div.jig-border").hide()},t=function(a){d(a).find("div.jig-border").show()}}}switch(a.middleBorder){case "hovered":x=function(b){d(b).parent().parent("div.jig-imageContainer").css("background",a.middleBorderColor)};y=function(a){d(a).parent().parent("div.jig-imageContainer").css("background","transparent")};break;case "others":x=function(a){d(a).parent().parent("div.jig-imageContainer").css("background","transparent")},y=function(b){d(b).parent().parent("div.jig-imageContainer").css("background",
a.middleBorderColor)}}switch(a.outerBorder){case "hovered":z=function(b){d(b).parent().parent("div.jig-imageContainer").css("border-color",a.outerBorderColor)};D=function(a){d(a).parent().parent("div.jig-imageContainer").css("border-color","transparent")};break;case "others":z=function(a){d(a).parent().parent("div.jig-imageContainer").css("border-color","transparent")},D=function(b){d(b).parent().parent("div.jig-imageContainer").css("border-color",a.outerBorderColor)}}if(H)switch(a.specialFx){case "others":I=
function(a){G(a,".jig-pixastic","mouseleave",.01)};v=function(b){G(b,".jig-pixastic","mouseleave",a.specialFxBlend)};break;case "hovered":I=function(b){G(b,".jig-pixastic","mouseenter",a.specialFxBlend)},v=function(a){G(a,".jig-pixastic","mouseleave",.01)}}else switch(a.specialFx){case "others":I=function(a){G(a,".jig-pixastic","mouseenter",.01)};v=function(b){G(b,".jig-pixastic","mouseleave",a.specialFxBlend)};break;case "hovered":I=function(b){G(b,".jig-pixastic","mouseenter",a.specialFxBlend)},
v=function(a){G(a,".jig-pixastic","mouseleave",.01)}}switch(a.caption){case "fade":A=function(a){u(a,".jig-caption-wrapper .jig-caption","mouseenter","show")};B=function(a){u(a,".jig-caption-wrapper .jig-caption","mouseleave","hide")};break;case "reverse-fade":A=function(a){u(a,".jig-caption-wrapper .jig-caption","mouseenter","hide")};B=function(a){u(a,".jig-caption-wrapper .jig-caption","mouseleave","show")};break;case "slide":H?(A=function(a){u(a,".jig-caption-wrapper .jig-caption","mouseenter",
"show")},B=function(a){u(a,".jig-caption-wrapper .jig-caption","mouseleave","hide")}):"off"==a.verticalCenterCaptions||"simple"==a.verticalCenterCaptions?(A=function(a){E(a,".jig-caption-wrapper .jig-caption","mouseenter","show")},B=function(a){E(a,".jig-caption-wrapper .jig-caption","mouseleave","hide")}):(A=function(a){F(a,".jig-caption-wrapper .jig-caption","mouseenter","show")},B=function(a){F(a,".jig-caption-wrapper .jig-caption","mouseleave","hide")});break;case "reverse-slide":H?(A=function(a){u(a,
".jig-caption-wrapper .jig-caption","mouseenter","hide")},B=function(a){u(a,".jig-caption-wrapper .jig-caption","mouseleave","show")}):"off"==a.verticalCenterCaptions||"simple"==a.verticalCenterCaptions?(A=function(a){E(a,".jig-caption-wrapper .jig-caption","mouseenter","hide")},B=function(a){E(a,".jig-caption-wrapper .jig-caption","mouseleave","show")}):(A=function(a){F(a,".jig-caption-wrapper .jig-caption","mouseenter","hide")},B=function(a){F(a,".jig-caption-wrapper .jig-caption","mouseleave",
"show")});break;case "mixed":"off"==a.verticalCenterCaptions||"simple"==a.verticalCenterCaptions?(A=function(a){E(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseenter","show")},B=function(a){E(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseleave","hide")}):(A=function(a){F(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseenter","show")},B=function(a){F(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseleave","hide")});break;case "reverse-mixed":"off"==
a.verticalCenterCaptions||"simple"==a.verticalCenterCaptions?(A=function(a){E(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseenter","hide")},B=function(a){E(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseleave","show")}):(A=function(a){F(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseenter","hide")},B=function(a){F(a,".jig-caption-wrapper .jig-caption-description-wrapper","mouseleave","show")})}"yes"!==a.disableHover&&(a.element.on("mouseenter mouseleave",
"a",function(a){var b=d(this);"none"!==b.css("display")&&(a.stopImmediatePropagation(),"mouseenter"===a.type?(n(b),I(b),A(b),r(b),x(b),z(b),b.data("title",b.attr("title")),b.removeAttr("title")):(l(b),v(b),B(b),t(b),y(b),D(b),b.attr("title",b.data("title"))))}),a.element.on("mousedown","a",function(a){d(this).attr("title",d(this).data("title"))}));d("body").one("jig-fontLoaded",O);if("off"!==a.loadMore&&(a.loadMoreCounter=0,"carousel"==a.lightbox))a.element.on("click",function(a){d(a.target).hasClass("justified-image-grid")&&
(a.stopPropagation(),a.preventDefault())});"prettyphoto"==a.lightbox&&"undefined"!==typeof jigOtherPrettyPhotoIsPresent&&d(document).ready(function(){setTimeout(function(){window[a.lightboxInit]()},10)})};w.createGallery=function(b){if(!1===d.JIGminVersion("1.7"))return JIGminVersion("1.7",!0),!1;var c=a.element.width(),e=d(window).width(),f;void 0===a.fixedWidth?(a.element.css("width","").css("width",a.element.width()),0===a.element.width()?void 0===a.fallbackWidth?0!==c&&e==a.lastWindowWidth?a.element.css("width",
c+"px"):(f=0,a.element.parents().each(function(b,c){var g=d(c),h=d(c).parent(),m=g.width();if(g.is(":visible")&&0!==m)return a.element.css("width",m-f+"px"),"undefined"==typeof h.data("jigAddedTabsHandler")&&(h.on("click",function(a){e!==d(window).width()&&h.find(".justified-image-grid").each(function(){var a=d(this);a.is(":visible")&&a.data("justifiedImageGrid").createGallery("resize")})}),h.data("jigAddedTabsHandler",!0)),!1;f+=g.outerWidth(!0)-g.width()})):a.element.css("width",a.fallbackWidth+
"px"):1E4<a.element.width()&&(a.element.css("width",e),d(window).on("load",function(){w.createGallery("resize")}))):a.element.css("width","").css("width",a.fixedWidth);c=a.element.width();if(9>c)10<a.retryCount?a.element.find(".jig-clearfix").html("The element is invisible or too thin, upon page loading. In case of using tabs, try a Custom width in the General settings and you may also use a fixed width. (Justified Image Grid)"):a.retryBuilding=setTimeout(function(){a.retryCount++;w.createGallery()},
100);else{a.retryBuilding&&clearTimeout(a.retryBuilding);a.element.find(".jig-clearfix").empty();a.justResized=!1;if("resize"===b){if(a.areaWidth&&a.areaWidth==c)return;a.justResized=!0}a.element.find(".jig-overflow a *:not(div)").off();a.areaWidth=c;a.row=[];a.fullWidth=a.extra=0;a.rows=[];a.unshifts=[];a.items=a.selectedItems.slice();if(!0===a.errorChecked&&!1===a.justResized){for(var h in a.items)if(q(a.items,h)&&-1!=d.inArray(void 0===a.items[h].photon?void 0===a.items[h].thumbUrl?a.items[h].url:
a.items[h].thumbUrl:a.items[h].photon,a.errorImages)&&(c=a.items[h],a.items.splice(h,1),a.filters)){var g=d("#jig"+a.instance+"-filterButtons .jig-filterButtonSelected").attr("data-filter-slug");a.filteredImages[g]=a.items.slice();for(var g=1,m=a.filters.length;g<m;g+=1)for(var s=0,k=a.filteredImages[a.filters[g][0]].length;s<k;s+=1){var p=d.inArray(c,a.filteredImages[a.filters[g][0]]);-1!=p&&a.filteredImages[a.filters[g][0]].splice(p,1)}}a.selectedItems=a.items.slice();a.errorImages=[];if(0===a.selectedItems.length){a.timThumbError=
'<p style="background-color: red;background-color: rgba(255, 0, 0, 0.5);color: white;font-weight: bold;padding: 10px;">All of the images have failed to load.</p> <div style="background-color: black;background-color: rgba(0, 0, 0, 0.5);color: #D6D6D6;padding: 10px;"><p>This is most likely a TimThumb permissions error.</p><p>Go to the Justified Image Grid settings, TimThumb & CDN tab. Click check permissions then click 0755 or 0777 to see if that works (or do it manually via FTP, on the files and folders it lists there in case chmod fails). You can disable TimThumb with the \'Use TimThumb\' setting and the option \'No\'.</p><p>Also read the troubleshooting guide in the documentation on what else to do, especially if you are using <a href="http://support.hostgator.com/articles/pre-sales-policies/secfilterengine-and-secfilterscanpost" target="_blank">Hostgator</a>!</p><p>If you are using a Better WP Security plug-in go to the Better WP Security settings, System Tweaks, Filter Suspicious Query Strings: Disable</p><p>Tip: Install the official WP plugin \'Jetpack\' by Automattic and enable \'Photon\'. Jetpack enables you to connect your blog to a WordPress.com account to use the powerful features normally only available to WordPress.com users. It\'s an excellent TimThumb alternative and will make your images load faster. Note that you won\'t be able to use special effects due to cross-domain security limitations. Read more at: <a href="http://jetpack.me/" target="_blank" rel="external nofollow">jetpack.me</a></p></div>';
a.element.html(a.timThumbError);return}a.errorChecked=!1}if(""===a.maxRows||0===a.maxRows)a.maxRows=1E3;a.rowcount=0;a.imagesShown=0;for(a.whileUntil=0===a.limit?0:a.limit<a.selectedItems.length?a.items.length-a.limit:0;a.items.length>a.whileUntil&&a.rowcount<a.maxRows;)h=U(),!1!==h&&(a.rows.push(h),a.rowcount++);a.imagesShown+=a.selectedItems.length-a.items.length;a.element.find(".jig-imageContainer:gt("+(a.imagesShown-1)+")").remove();a.imagesAlreadyAdded=a.element.find(".jig-imageContainer").length;
g=h=0;for(m=a.rows.length;g<m;g+=1)for(s=0,k=a.rows[g].length;s<k;s+=1)h++,c=a.rows[g][s],c.container&&h<=a.imagesAlreadyAdded?V(c,a.rows[g].length,s):W(c,a.rows[g].length,s);if("links-off"!==a.lightbox&&"no"!==a.lightbox&&"new_tab"!==a.lightbox&&""!==a.linkrel){for(;0<a.unshifts.length;)c=a.unshifts.shift(),void 0===c.linkContainer?P(c):a.currentHiddenLink=c.linkContainer;for(;0<a.items.length;)c=a.items.shift(),void 0===c.linkContainer?P(c):a.currentHiddenLink=c.linkContainer;a.currentHiddenLink=
void 0}void 0===a.fixedWidth&&(a.element.css("width","").css("width",a.element.width()),0===a.element.width()&&a.element.css("width",a.areaWidth+"px"));d("img",a.element).not(".jig-hiddenImg").on("load",function(){if(this.complete||void 0!==this.naturalWidth&&0!==this.naturalWidth||void 0!==this.readyState&&("complete"===this.readyState||4===this.readyState)||H){var b=d(this).closest("a"),c=d(this).closest(".jig-overflow");0!==b.length&&!0!==b.hasClass("jig-loaded")&&(b.addClass("jig-loaded"),"0"===
c.css("opacity")&&c.animate({opacity:1},a.animSpeed),"off"!=a.specialFx&&d(this).clone().addClass("jig-pixastic").insertAfter(d(this)).on("load",Q).each(function(){(this.complete||void 0!==this.naturalWidth&&0!==this.naturalWidth||void 0!==this.readyState&&("complete"===this.readyState||4===this.readyState))&&d(this).trigger("load")}));d(this).off("load")}else"yes"==a.errorChecking&&(b=/(?:\?src=)(.*)(?:&h=)|^(https?:\/\/.+?wp\.com.*)$/g.exec(d(this).attr("src")),null!==b?void 0!==b[1]?a.errorImages.push(b[1]):
void 0!==b[2]&&a.errorImages.push(b[2]):a.errorImages.push(d(this).attr("src")),d(this).closest(".jig-imageContainer").addClass("jig-unloadable"),R())}).on("error",function(){if("yes"==a.errorChecking){var b=/(?:\?src=)(.*)(?:&h=)|^(https?:\/\/.+?wp\.com.*)$/g.exec(d(this).attr("src"));null!==b?void 0!==b[1]?a.errorImages.push(b[1]):void 0!==b[2]&&a.errorImages.push(b[2]):a.errorImages.push(d(this).attr("src"));d(this).closest(".jig-imageContainer").addClass("jig-unloadable");R()}}).each(function(){(this.complete||
void 0!==this.naturalWidth&&0!==this.naturalWidth||void 0!==this.readyState&&("complete"===this.readyState||4===this.readyState))&&d(this).trigger("load")});if("resize"!==b)switch(a.lightbox){case "prettyphoto":case "colorbox":case "magnific":case "photoswipe":case "foobox":case "custom":window[a.lightboxInit]();break;case "links-off":a.element.find("a").css("cursor","default");a.element.on("click","a",function(a){a.preventDefault()});break;case "socialgallery":try{socialGalleryBind()}catch(n){}}else"prettyphoto"==
a.lightbox&&"undefined"!==typeof jigReCallPrettyPhotoAfterPossibleResize?setTimeout(function(){window[a.lightboxInit]();jigReCallPrettyPhotoAfterPossibleResize=void 0},10):a.visibleImageCount!=d(".jig-imageContainer",a.element).length&&X();if("click"==a.loadMore||"scroll"==a.loadMore||"hybrid"==a.loadMore||"once"==a.loadMore)a.loadMoreButton=a.element.find(".jig-loadMoreButton"),h=a.selectedItems.length-a.limit,b=a.element.find(".jig-hiddenLink").length,1==a.loadMoreButton.length?0<h?(a.loadMoreButton.find(".jig-loadMoreButton-count").text(b),
"yes"===a.loadMoreAutoWidth&&a.loadMoreButton.css("width",a.loadMoreButton.find(".jig-loadMoreButton-inner").width())):a.loadMoreButton.remove():0<h&&(h="",""!==a.loadMoreCountText&&"none"!==a.loadMoreCountText&&(h=a.loadMoreCountText,h=h.replace("*count*",'<span class="jig-loadMoreButton-count">'+b+"</span>")),a.loadMoreButton=d('<div class="jig-loadMoreButton"><span class="jig-loadMoreButton-inner">'+a.loadMoreText+(""!==h?"<br />"+h:"")+"</span></div>"),a.element.on("click",".jig-loadMoreButton",
r),a.element.find(".jig-clearfix").after(a.loadMoreButton),"yes"===a.loadMoreAutoWidth&&a.loadMoreButton.css("width",a.loadMoreButton.find(".jig-loadMoreButton-inner").width())),"scroll"!=a.loadMore&&"hybrid"!=a.loadMore||d(window).scroll(function(){if(("scroll"==a.loadMore||"hybrid"==a.loadMore&&0<a.loadMoreCounter)&&0<a.selectedItems.length-a.limit){var b=a.element.find(".jig-loadMoreButton").offset();d(window).scrollTop()>=b.top-d(window).height()&&r()}});if("no"!==a.wrapText){b=a.element.find(".jig-imageContainer:last");
0===a.element.find(".jig-flowSpacer").length&&a.element.find(".jig-imageContainer:last").after('<div class="jig-flowSpacer"></div>').next().css({width:"1px",height:b.height()+3,"float":"ltr"==a.readingDirection?"left":"right"});var l=a.element.find(".jig-flowSpacer");setTimeout(function(){"ltr"==a.readingDirection?a.element.offset().left==l.offset().left?l.css("margin-right",0):l.css("margin-right",2*a.margins):a.element.offset().left==l.offset().left?l.css("margin-left",0):l.css("margin-left",2*
a.margins)},1)}"yes"!=a.customFonts||"off"===a.caption||"below"!=a.caption&&"off"===a.verticalCenterCaptions&&"captions"!=a.specialFx||O(!0);a.prevInstanceID="#jig"+(a.instance-1);d(window).width()!=e||a.areaWidth!=a.element.width()?(a.resizeCount++,1<a.resizeCount&&a.element.css("min-height",a.element.height()),w.createGallery("resize"),1<a.instance&&0!==d(a.prevInstanceID).length&&d(a.prevInstanceID).data("justifiedImageGrid").createGallery("resize"),a.element.css("min-height","")):(1<a.instance&&
0!==d(a.prevInstanceID).length&&(a.prevInstanceData=d(a.prevInstanceID).data("justifiedImageGrid"),a.prevInstanceData.s.element.css("width","").css("width",a.prevInstanceData.s.element.width()),a.prevInstanceData.s.areaWidth!=a.prevInstanceData.s.element.width()&&a.prevInstanceData.createGallery("resize")),a.resizeCount=0,a.lastWindowWidth=e,a.visibleImageCount=d(".jig-imageContainer",a.element).length)}};var O=function(b){!0!==b&&(b="captions"==a.specialFx?!0:!1);a.element.find(".jig-imageContainer").each(function(c,
e){var f=d(e),h;if("off"!==a.verticalCenterCaptions){h=f.find(".jig-caption-wrapper");var g=h.filter(".jig-cw-role-real"),m=g.height(),s=g.find(".jig-caption"),k="mixed"==a.caption||"reverse-mixed"==a.caption?g.find(".jig-caption-description-wrapper"):!1;"slide"!=a.caption&&"reverse-slide"!=a.caption||!s.is(":animated")?"mixed"!=a.caption&&"reverse-mixed"!=a.caption||!k.is(":animated")?(0===m&&(s.css({opacity:0,display:"block"}),m=g.height(),s.removeAttr("style")),!0===b?h.css({bottom:"auto",top:Math.round(g.closest(".jig-imageContainer").height()/
2-m/2)}):h.css({bottom:"auto"}).animate({top:Math.round(g.closest(".jig-imageContainer").height()/2-m/2)},a.animSpeed)):k.promise().done(function(){m=g.height();var b=k.height();"mixed"==a.caption&&0!==b?(k.css({display:"none"}),m=g.height(),k.css({display:"block"})):"reverse-mixed"==a.caption&&0===b&&(k.css({display:"block"}),m=g.height(),k.css({display:"none"}));h.css({bottom:"auto"}).animate({top:Math.round(g.closest(".jig-imageContainer").height()/2-m/2)},a.animSpeed)}):s.promise().done(function(){m=
g.height();0===m&&(s.css({opacity:0,display:"block"}),m=g.height(),s.removeAttr("style"));h.css({bottom:"auto"}).animate({top:Math.round(g.closest(".jig-imageContainer").height()/2-m/2)},a.animSpeed)})}"below"==a.caption&&M(f,!0);"captions"==a.specialFx&&(D&&"no"!==a.captionMatchWidth&&f.find(".jig-caption-title").each(function(){if(0!==d(this).position().left%1){var a=d(this);a.css({width:a.width()+1})}}),h=h?h:f.find(".jig-caption-wrapper"),K(J(h)))})},X=function(){switch(a.lightbox){case "prettyphoto":case "colorbox":case "magnific":case "photoswipe":case "foobox":window[a.lightboxInit]();
break;case "links-off":a.element.find("a").css("cursor","default");a.element.on("click","a",function(a){a.preventDefault()});break;case "socialgallery":try{socialGalleryBind()}catch(b){}}},L=function(b){var c=d(this),e=c.attr("data-filter-slug"),f=!1,h,g,m,k;"undefined"===typeof b&&(c=!1!==a.filters?d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType).first():d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType).first(),e=c.attr("data-filter-slug"));h=
c.parent().attr("data-filter-level");if(1==h){if("no"==a.filterMultiple||"all-items-nofilter"==e)!1===c.hasClass("jig-filter"+a.filterType+"Selected")&&(c.siblings(".jig-filter"+a.filterType+"Selected").removeClass("jig-filter"+a.filterType+"Selected"),c.addClass("jig-filter"+a.filterType+"Selected"),a.selectedItems=a.filteredImages[e],f=!0);else{f=c.parent().find(".jig-filter"+a.filterType+"Selected").length;1==f&&"all-items-nofilter"==c.siblings(".jig-filter"+a.filterType+"Selected").attr("data-filter-slug")&&
c.siblings(".jig-filter"+a.filterType+"Selected").removeClass("jig-filter"+a.filterType+"Selected");if(!1===c.hasClass("jig-filter"+a.filterType+"Selected"))c.addClass("jig-filter"+a.filterType+"Selected"),f++;else{if(1==f)if("all-items-nofilter"==d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType).first().attr("data-filter-slug"))d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType).first().click().addClass("jig-filter"+a.filterType+"Selected");else return;
c.removeClass("jig-filter"+a.filterType+"Selected");f--}var l=[];c.parent().find(".jig-filter"+a.filterType+"Selected").each(function(){l.push(d(this).attr("data-filter-slug"))});e=l.toString();if("undefined"===typeof a.filteredImages[e]){a.filteredImages[e]=[];var p=0;g=a.allItems.length;for(f=0;f<g;f+=1)if(a.allItems[f].filters)for(p=0,k=a.allItems[f].filters.length,m=0;m<k;m+=1)"or"==a.filterMultiple?-1<d.inArray(a.allItems[f].filters[m][0],l)&&-1==d.inArray(a.allItems[f],a.filteredImages[e])&&
a.filteredImages[e].push(a.allItems[f]):(-1<d.inArray(a.allItems[f].filters[m][0],l)&&p++,p==l.length&&-1==d.inArray(a.allItems[f],a.filteredImages[e])&&a.filteredImages[e].push(a.allItems[f]))}a.selectedItems=a.filteredImages[e];f=!0}f&&a.L2filters&&(a.L1selectedItems=a.selectedItems)}if(a.L2filters){"undefined"===typeof b&&(c=d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType).first(),h=c.parent().attr("data-filter-level"));if(2==h)if("no"==a.L2filterMultiple||"all-items-nofilter"==
e)c.siblings(".jig-filter"+a.L2filterType+"Selected").removeClass("jig-filter"+a.L2filterType+"Selected"),c.addClass("jig-filter"+a.L2filterType+"Selected");else if(b=c.parent().find(".jig-filter"+a.L2filterType+"Selected").length,1==b&&"all-items-nofilter"==c.siblings(".jig-filter"+a.L2filterType+"Selected").attr("data-filter-slug")&&c.siblings(".jig-filter"+a.L2filterType+"Selected").removeClass("jig-filter"+a.L2filterType+"Selected"),!1===c.hasClass("jig-filter"+a.L2filterType+"Selected"))c.addClass("jig-filter"+
a.L2filterType+"Selected"),b++;else{if(1==b)if("all-items-nofilter"==d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType).first().attr("data-filter-slug"))d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType).first().click().addClass("jig-filter"+a.L2filterType+"Selected");else return;c.removeClass("jig-filter"+a.L2filterType+"Selected");b--}var n=[];d("#jig"+a.instance+"-L2filter"+a.L2filterType+"s .jig-filter"+a.L2filterType+"Selected").each(function(){n.push(d(this).attr("data-filter-slug"))});
e=[];a.filters&&d("#jig"+a.instance+"-filter"+a.filterType+"s .jig-filter"+a.filterType+"Selected").each(function(){e.push(d(this).attr("data-filter-slug"))});c=e.concat(n).toString();!1===a.filters&&(a.L1selectedItems=a.allItems);if("undefined"===typeof a.filteredImages[c])if(1==n.length&&"all-items-nofilter"==n[0])a.filteredImages[c]=a.L1selectedItems,a.selectedItems=a.filteredImages[c];else for(a.filteredImages[c]=[],b=0,g=a.L1selectedItems.length,f=0;f<g;f+=1)if(a.L1selectedItems[f].L2filters)for(b=
0,k=a.L1selectedItems[f].L2filters.length,m=0;m<k;m+=1)"or"==a.L2filterMultiple?-1<d.inArray(a.L1selectedItems[f].L2filters[m][0],n)&&-1==d.inArray(a.L1selectedItems[f],a.filteredImages[c])&&a.filteredImages[c].push(a.L1selectedItems[f]):(-1<d.inArray(a.L1selectedItems[f].L2filters[m][0],n)&&b++,b==n.length&&-1==d.inArray(a.L1selectedItems[f],a.filteredImages[c])&&a.filteredImages[c].push(a.L1selectedItems[f]));a.selectedItems=a.filteredImages[c];f=!0}if(f){a.element.find(".jig-imageContainer, .jig-hiddenLink").remove();
c=0;for(b=a.selectedItems.length;c<b;c+=1)a.selectedItems[c].linkContainer=void 0;w.createGallery("filter")}},U=function(){a.row=[];a.validRow=!0;a.fullWidth=0;for(a.extra=0;a.items.length>a.whileUntil&&a.extra<a.areaWidth;){var b=a.items.shift();b.newHeight=b.newWidth=b.containerHeight=b.containerWidth=b.marLeft=void 0;b.ratio=b.width/a.maxHeight;a.row.push(b);a.fullWidth+=Math.round(b.width*a.defaultHeightRatio)+a.margins+a.bordersTotal;a.extra=a.fullWidth-a.margins}a.extra-=a.areaWidth;if(0<a.row.length&&
0<a.extra||0===a.rows.length&&a.items.length>a.whileUntil){for(var b="landscape",c=0,e=a.row.length;c<e;c+=1)if(1>a.row[c].ratio){b="portrait";break}"landscape"==b?S():"yes"!==a.disableCropping?x():S()}else if(0<a.rows.length&&a.items.length==a.whileUntil){switch(a.incompleteLastRow){case "flexible":x("flexible");break;case "flexible-center":x("flexible-center");break;case "hide":x("hide");break;case "flexible-match":"off"!==a.loadMore&&0>=a.selectedItems.length-a.limit?C():x("flexible");break;case "flexible-match-center":"off"!==
a.loadMore&&0>=a.selectedItems.length-a.limit?C("center"):x("flexible-center");break;case "match":C();break;case "match-center":C("center");break;case "center":x("center");break;default:x("lastRow")}if(!0!==a.validRow)return a.imagesShown-=a.row.length,a.unshifts=a.row,a.whileUntil+=a.unshifts.length,!1}else"center"!==a.incompleteLastRow?x("lastRow"):x("center");return a.row},C=function(b){var c,e=0;c=0;for(var f=a.rows.length;c<f;c+=1)e=c;if(void 0===a.rows[e]||void 0===a.rows[e][0])x("lastRow");
else{c=a.rows[e][0].containerHeight?a.rows[e][0].containerHeight:a.rows[e][0].newHeight;a.marginsTotal=(a.row.length-1)*a.margins+a.row.length*a.bordersTotal;for(var f=a.rowlen=0,d=a.row.length;f<d;f+=1)void 0!==a.rows[e][f]&&a.row[f].width==a.rows[e][f].width?(a.row[f].newHeight=a.rows[e][f].newHeight,a.row[f].containerHeight=a.rows[e][f].containerHeight,a.row[f].newWidth=a.rows[e][f].newWidth,a.row[f].containerWidth=a.rows[e][f].containerWidth,a.row[f].marLeft=a.rows[e][f].marLeft):(a.row[f].newHeight=
c,a.row[f].newWidth=Math.round(a.row[f].newHeight*a.row[f].ratio)),a.rowlen+=a.row[f].newWidth;c>a.targetHeight&&(a.remaining=a.rowlen+a.marginsTotal-a.areaWidth,0<a.remaining&&N());"undefined"!==typeof b&&a.rowlen+a.marginsTotal<a.areaWidth&&(a.row[0].spaceLeft=Math.floor(.5*(a.areaWidth-a.rowlen-a.marginsTotal)))}},S=function(){var b=!0;a.marginsTotal=(a.row.length-1)*a.margins+a.row.length*a.bordersTotal;a.rowlen=0;a.heights=[];for(var c=0,e=a.row.length;c<e;c+=1){var f=Math.round(a.row[c].width*
a.defaultHeightRatio),d=Math.round((f+a.marginsTotal/a.row.length)/a.fullWidth*a.extra);a.row[c].newWidth=f-d;a.heights[c]=a.row[c].newWidth/a.row[c].ratio;if(a.heights[c]<a.minHeight){x();return}a.heights[c]>a.maxHeight?(a.row[c].newHeight=a.targetHeight,a.row[c].newWidth=Math.round(a.row[c].newHeight*a.row[c].ratio),b=!1):(a.row[c].newHeight=a.heights[c],a.rowlen+=a.row[c].newWidth)}b&&(a.remaining=a.rowlen+a.marginsTotal-a.areaWidth,N())},x=function(b){var c=!0;if(1!=a.row.length&&void 0===b){var e=
a.row.pop();a.fullWidth-=Math.round(e.width*a.defaultHeightRatio)+a.margins+a.bordersTotal;a.items.unshift(e);a.extra=a.fullWidth-a.margins;a.extra-=a.areaWidth}a.marginsTotal=(a.row.length-1)*a.margins+a.row.length*a.bordersTotal;a.rowlen=0;a.heights=[];for(var e=0,f=a.row.length;e<f;e+=1){var d=Math.round(a.row[e].width*a.defaultHeightRatio),g=Math.round((d+a.marginsTotal/a.row.length)/a.fullWidth*a.extra);a.row[e].newWidth=d-g;a.heights[e]=a.row[e].newWidth/a.row[e].ratio;if(a.heights[e]>a.maxHeight){if(void 0===
b){b=a.items.shift();a.row.push(b);a.fullWidth+=Math.round(b.width*a.defaultHeightRatio)+a.margins+a.bordersTotal;a.extra=a.fullWidth-a.margins;a.extra-=a.areaWidth;T();return}"off"!==a.loadMore&&0>=a.selectedItems.length-a.limit&&("flexible"==b?b="lastRow":"flexible-center"==b&&(b="center"));if("lastRow"==b){b=0;for(c=a.row.length;b<c;b+=1)a.row[b].newHeight=a.targetHeight,a.row[b].newWidth=Math.round(a.row[b].newHeight*a.row[b].ratio);return}if("center"==b){c=b=0;for(e=a.row.length;c<e;c+=1)a.row[c].newHeight=
a.targetHeight,a.row[c].newWidth=Math.round(a.row[c].newHeight*a.row[c].ratio),b+=a.row[c].newWidth;a.row[0].spaceLeft=Math.floor(.5*(a.areaWidth-b-a.marginsTotal));return}a.validRow=!1;a.row[e].newWidth=void 0;c=!1}else if(a.heights[e]<a.minHeight&&void 0===b){T();return}void 0!==a.row[e].newWidth&&(a.row[e].newHeight=a.heights[e],a.rowlen+=a.row[e].newWidth)}c&&(a.remaining=a.rowlen+a.marginsTotal-a.areaWidth,N())},N=function(){if(0!==a.remaining)if(0<a.remaining)for(;0<a.remaining;)for(var b=0,
c=a.row.length;b<c&&(a.row[b].newWidth--,a.row[b].newHeight=a.heights[b]=a.row[b].newWidth/a.row[b].ratio,a.remaining--,0!==a.remaining);b+=1);else for(;0>a.remaining;)for(b=0,c=a.row.length;b<c&&(a.row[b].newWidth++,a.row[b].newHeight=a.heights[b]=a.row[b].newWidth/a.row[b].ratio,a.remaining++,0!==a.remaining);b+=1);for(var b=Math.floor(Math.min.apply(null,a.heights)),c=0,e=a.row.length;c<e;c+=1)a.row[c].containerHeight=b,a.row[c].newHeight=Math.round(a.row[c].newHeight)},T=function(){var b=[],c=
0;a.marginsTotal=(a.row.length-1)*a.margins+a.row.length*a.bordersTotal;for(var e=0,f=a.row.length;e<f;e+=1){var d=a.row[e],g=Math.round(a.row[e].width*a.defaultHeightRatio);d.newHeight=a.targetHeight;d.newWidth=g;b[e]=Math.round((g+a.marginsTotal/a.row.length)/a.fullWidth*a.extra);c+=b[e]}c=a.extra-c;if(0!==c)if(0<c)for(;0<c;)for(e=0,f=b.length;e<f&&(b[e]++,c--,0!==c);e+=1);else for(;0>c;)for(e=0,f=b.length;e<f&&(b[e]--,c++,0!==c);e+=1);c=0;for(e=a.row.length;c<e;c+=1)f=b[c],d=a.row[c],d.marLeft=
Math.round(f/2),d.containerWidth=d.newWidth-f},W=function(b,c,e){if(isNaN(b.newWidth)||!b.width)return!1;void 0!==b.linkContainer&&(d(b.linkContainer).remove(),b.linkContainer=void 0);"undefined"===typeof b[a.linkTitleField]&&(b[a.linkTitleField]="");"undefined"===typeof b[a.imgAltField]&&(b[a.imgAltField]="");"undefined"===typeof b[a.titleField]&&(b[a.titleField]="");"undefined"===typeof b[a.captionField]&&(b[a.captionField]="");"undefined"===typeof b.gallery&&(b.gallery="");var f="";b.carousel_data?
(b.carousel_data=" "+b.carousel_data+" ",f=" tiled-gallery-item"):b.carousel_data="";b.extra_class&&(f+=" "+b.extra_class);b.off="";b.url=b.url;var f=d('<div class="jig-imageContainer'+f+'"/>'),h=d('<div class="jig-overflow"/>'),g=b.url,m=b.link_target?b.link_target:"_self",k=a.linkClass,w=a.linkRel,p="",n="";""!==b.gallery&&(f.append(b.gallery.html),w=' rel="'+b.gallery.rel+'" ',f.addClass(b.gallery.lightbox_class),f.attr("id",b.gallery.id));b.link&&(g=b.link,"video"!==m&&"videoplayer"!==m?(k="foobox"!==
m?'target="'+m+'" '+k.replace("jig-link","jig-customLink"):'target="'+m+'" '+k.replace("jig-link",""),w=b.link_rel?'rel="'+b.link_rel+'"':""):"magnific"==a.lightbox&&-1==k.indexOf("mfp-")&&(k=k.replace("jig-link","jig-link mfp-iframe")));try{g=decodeURIComponent((g+"").replace(/\+/g,"%20"))}catch(v){}p=b[a.linkTitleField];n=b[a.imgAltField];b.download&&("yes"==a.downloadLink?(m=(0!==p.length?a.separatorCharacter:"")+b.download,p+=m):"alt"==a.downloadLink&&(m=(0!==n.length?a.separatorCharacter:"")+
b.download,n+=m));b.lightbox_link&&("yes"==a.lightboxLink?(lightboxLink=(0!==p.length?a.separatorCharacter:"")+b.lightbox_link,p+=lightboxLink):"alt"==a.lightboxLink&&(lightboxLink=(0!==n.length?a.separatorCharacter:"")+b.lightbox_link,n+=lightboxLink));""!==p&&(p='title="'+p+'" ');""!==n&&(n='alt="'+n+'" ');"new_tab"==a.lightbox&&(k='target="_blank" ');g=d("<a "+k+w+a.linkAttribute+p+'href="'+("links-off"!=a.lightbox?g:"#")+'"/>');n=d("<img "+n+b.carousel_data+"/>");b.carousel_data&&b.download&&
("yes"==a.downloadLink?(m=(0!==n.attr("data-image-title").length?a.separatorCharacter:"")+d("<textarea />").html(b.download).val(),n.attr("data-image-title",n.attr("data-image-title")+m)):"alt"==a.downloadLink&&(m=(0!==n.attr("data-image-description").length?"<br />":"")+d("<textarea />").html(b.download).val(),n.attr("data-image-description",n.attr("data-image-description")+m)));"undefined"!==typeof b.geo&&n.attr("data-geo",b.geo);h.css("opacity",0);e==c-1&&f.addClass("jig-last");h.css("width",(b.containerWidth?
b.containerWidth:b.newWidth)+"px");h.css("height",(b.containerHeight?b.containerHeight:b.newHeight)+"px");b.photon?n.attr("src",decodeURIComponent((b.photon+"").replace(/\+/g,"%20"))):(c=b.thumbUrl?b.thumbUrl:b.url,e=a.maxHeight,m="",k=/.*\.(jpe?g|gif|bmp|webp)/im.exec(c),null!==k&&(m="&f=."+k[1]),a.aspectRatio||a.randomizeWidth?(k=a.maxWidth,""!==a.randomizeWidth&&(k=b.width),"yes"==a.retinaReady&&(e=Math.floor(e*a.devicePixelRatio),k=Math.floor(k*a.devicePixelRatio)),n.attr("src",a.timthumb+"?src="+
c+"&h="+e+"&w="+k+"&q="+a.quality+a.cropZone+m)):"yes"==a.retinaReady?(e=Math.floor(e*a.devicePixelRatio),k=Math.floor(b.width*a.devicePixelRatio),n.attr("src",a.timthumb+"?src="+c+"&h="+e+"&w="+k+"&q="+a.quality+a.cropZone+m)):n.attr("src",a.timthumb+"?src="+c+"&h="+e+"&q="+a.quality+a.cropZone+m));n.attr("width",b.newWidth).css("width",b.newWidth+"px");n.attr("height",b.newHeight).css("height",b.newHeight+"px");b.marLeft&&n.css("margin-left",-b.marLeft+"px");("center"==a.incompleteLastRow||"flexible-center"==
a.incompleteLastRow||"flexible-match-center"==a.incompleteLastRow||"match-center"==a.incompleteLastRow)&&b.spaceLeft&&0<b.spaceLeft&&(f.css("ltr"==a.readingDirection?"margin-left":"margin-right",b.spaceLeft+"px"),b.spaceLeft=0);n.css("margin-top",0);g.append(n);"off"!==a.overlay&&g.append('<div class="jig-overlay-wrapper"><div class="jig-overlay"></div></div>'+("on"===a.overlayIcon?'<div class="jig-overlay-icon-wrapper"><div class="jig-overlay-icon"></div></div>':""));0===a.bordersTotal&&0===a.innerBorderWidth||
g.append('<div class="jig-border"></div>');"off"!==a.caption&&(""!==b.gallery&&(b[a.titleField]="undefined"!==typeof b.gallery[a.titleField]&&""!==b.gallery[a.titleField]&&" "!==b.gallery[a.titleField]?b.gallery[a.titleField]:"",b[a.captionField]="undefined"!==typeof b.gallery[a.captionField]&&""!==b.gallery[a.captionField]&&" "!==b.gallery[a.captionField]?b.gallery[a.captionField]:""),c="",""!==b[a.titleField]&&" "!==b[a.titleField]&&(c+='<div class="jig-caption-title">'+l(b[a.titleField],"<br><br/><i><b><strong><italic><font><span>")+
"</div>"),""!==b[a.captionField]&&" "!==b[a.captionField]&&(c+='<div class="jig-caption-description-wrapper"><div class="jig-caption-description'+(""!==c?"":" jig-alone")+'">'+l(b[a.captionField],"<br><br/><i><b><strong><italic><font><span>")+"</div></div>"),""!==c?(c='<div class="jig-caption-wrapper jig-cw-role-real"><div class="jig-caption">'+c+"</div></div>","below"!==a.caption?g.append(c):0!==a.middleBorderWidth&&"always"==a.innerBorder&&"always"!==a.middleBorder?f.append(d(c).width(h.width()-
2*parseFloat(a.innerBorderWidth))):f.append(d(c).css({width:h.css("width")}))):"below"==a.caption&&(c='<div class="jig-caption-wrapper"></div>',0!==a.middleBorderWidth&&"always"==a.innerBorder&&"always"!==a.middleBorder?f.append(d(c).width(h.width()-2*parseFloat(a.innerBorderWidth))):f.append(d(c).css({width:h.css("width")}))));h.append(g);b.carousel_data&&b.caption&&h.append('<div class="tiled-gallery-caption">'+l(b.caption)+"</div>");f.prepend(h);a.element.find(".jig-clearfix").before(f);"off"!==
a.caption&&("below"==a.caption?M(f):"captions"==a.specialFx&&(e=f.find(".jig-cw-role-real"),c="no"==a.captionMatchWidth||a.captionMatchWidthForceNo?d(e[0].cloneNode(!1)):e.clone(),c.removeClass("jig-cw-role-real").addClass("jig-cw-role-effect"),"off"!==a.overlay?f.find(".jig-overlay-wrapper").before(c):e.before(c)));b.container=f;b.overflow=h;b.img=n;b.linkElement=g;return f},V=function(b,c,e){e==c-1?b.container.addClass("jig-last"):b.container.removeClass("jig-last");c=b.overflow;e=b.img;c.css("width",
(b.containerWidth?b.containerWidth:b.newWidth)+"px");c.css("height",(b.containerHeight?b.containerHeight:b.newHeight)+"px");e.attr("width",b.newWidth).css("width",b.newWidth+"px");e.attr("height",b.newHeight).css("height",b.newHeight+"px");b.marLeft?e.css("margin-left",-b.marLeft+"px"):e.css("margin-left","");if("center"==a.incompleteLastRow||"flexible-center"==a.incompleteLastRow||"flexible-match-center"==a.incompleteLastRow||"match-center"==a.incompleteLastRow)b.spaceLeft&&0<b.spaceLeft?(b.container.css("ltr"==
a.readingDirection?"margin-left":"margin-right",b.spaceLeft+"px"),b.spaceLeft=0):b.container.css("ltr"==a.readingDirection?"margin-left":"margin-right","");if("off"!=a.specialFx){var d=e.siblings(".jig-pixastic");0===d.length&&"captions"==a.specialFx&&(d=e.siblings(".jig-cw-role-effect").find(".jig-pixastic"));Y(d,e,b.container)}"below"==a.caption&&(0!==a.middleBorderWidth&&"always"==a.innerBorder&&"always"!==a.middleBorder?b.container.find(".jig-caption-wrapper").width(c.width()-2*parseFloat(a.innerBorderWidth)):
b.container.find(".jig-caption-wrapper").css({width:c.css("width")}),M(b.container,!0));"off"!==a.caption&&"off"!==a.verticalCenterCaptions&&(c=b.container.find(".jig-cw-role-real").clone(),c.find(".jig-caption").css("display","block"),c.appendTo(b.linkElement).css({bottom:"auto",opacity:.01}).css("top",Math.round((b.containerHeight?b.containerHeight:b.newHeight)/2-c.height()/2)),e=c.css("top"),c.remove(),b.container.find(".jig-caption-wrapper").css({bottom:"auto"}).animate({top:e},a.animSpeed))},
P=function(b,c){"undefined"===typeof b[a.linkTitleField]&&(b[a.linkTitleField]="");"undefined"===typeof b[a.imgAltField]&&(b[a.imgAltField]="");"undefined"===typeof b[a.titleField]&&(b[a.titleField]="");"undefined"===typeof b[a.captionField]&&(b[a.captionField]="");var e=b.off="";b.carousel_data?(b.carousel_data=" "+b.carousel_data+" ",e=" tiled-gallery-item"):b.carousel_data="";b.extra_class&&(e+=" "+b.extra_class);var f=b.url,h="",g="",k=a.hiddenLinkClass,g=b.link_target?b.link_target:"_self",l=
a.linkRel;""!==e&&(k=k.replace('jig-hiddenLink"',"jig-hiddenLink"+e+'"'));b.link&&(f=b.link,"video"!==g&&"videoplayer"!==g?(k="foobox"!==g?'target="'+g+'" '+k.replace("jig-link","jig-customLink jig-hiddenLink"):'target="'+g+'" '+k.replace("jig-link","jig-hiddenLink"),l=b.link_rel?'rel="'+b.link_rel+'"':""):"magnific"==a.lightbox&&-1==k.indexOf("mfp-")&&(k=k.replace("jig-link","jig-link mfp-iframe")));try{f=decodeURIComponent((f+"").replace(/\+/g,"%20"))}catch(w){}h=b[a.linkTitleField];g=b[a.imgAltField];
b.download&&("yes"==a.downloadLink?(e=(0!==h.length?a.separatorCharacter:"")+b.download,h+=e):"alt"==a.downloadLink&&(e=(0!==g.length?a.separatorCharacter:"")+b.download,g+=e));b.lightbox_link&&("yes"==a.lightboxLink?(lightboxLink=(0!==h.length?a.separatorCharacter:"")+b.lightbox_link,h+=lightboxLink):"alt"==a.lightboxLink&&(lightboxLink=(0!==g.length?a.separatorCharacter:"")+b.lightbox_link,g+=lightboxLink));""!==h&&(h='title="'+h+'" ');""!==g&&(g='alt="'+g+'" ');f=d("<a "+k+l+a.linkAttribute+h+
'href="'+("links-off"!=a.lightbox?f:"#")+'"/>');g=d('<img class="jig-hiddenImg" '+g+b.carousel_data+"/>");b.carousel_data&&b.download&&("yes"==a.downloadLink?(e=(0!==g.attr("data-image-title").length?a.separatorCharacter:"")+d("<textarea />").html(b.download).val(),g.attr("data-image-title",g.attr("data-image-title")+e)):"alt"==a.downloadLink&&(e=(0!==g.attr("data-image-description").length?"<br />":"")+d("<textarea />").html(b.download).val(),g.attr("data-image-description",g.attr("data-image-description")+
e)));g.attr("src","data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D");f.append(g);b.linkContainer=f;void 0!==a.currentHiddenLink?d(a.currentHiddenLink).after(f):a.element.find(".jig-clearfix").after(f);a.currentHiddenLink=f},Y=function(a,c,e){c.off("load");0!==a.length&&a.off("load").remove();c.clone().addClass("jig-pixastic").insertAfter(c).on("load",Q).each(function(){(this.complete||void 0!==this.naturalWidth&&0!==this.naturalWidth)&&d(this).trigger("load")})},
Q=function(){if(!0!==d(this).hasClass("jig-specialfx-complete"))if(d(this).parent(),d(this).stop().css("display","block").css("opacity",1),""===a.specialFxOptions)switch(a.specialFxType){case "desaturate":Pixastic.process(this,"desaturate",{retinaReady:a.retinaReady,devicePixelRatio:a.devicePixelRatio,average:!1},y);break;case "blur":Pixastic.process(this,"blurfast",{retinaReady:a.retinaReady,devicePixelRatio:a.devicePixelRatio,amount:.5},y);break;case "glow":Pixastic.process(this,"glow",{retinaReady:a.retinaReady,
devicePixelRatio:a.devicePixelRatio,amount:.3,radius:.2},y);break;case "sepia":Pixastic.process(this,"sepia",{retinaReady:a.retinaReady,devicePixelRatio:a.devicePixelRatio},y);break;case "laplace_dark":Pixastic.process(this,"laplace",{retinaReady:a.retinaReady,devicePixelRatio:a.devicePixelRatio,edgeStrength:2,invert:!1,greyLevel:0},y);break;case "laplace_light":Pixastic.process(this,"laplace",{retinaReady:a.retinaReady,devicePixelRatio:a.devicePixelRatio,edgeStrength:2,invert:!0,greyLevel:0},y)}else{for(var b=
a.specialFxOptions,c={},e=0,f=b.length;e<f;e+=1){var h=b[e].split(":");c[h[0]]=h[1]}c.retinaReady=a.retinaReady;c.devicePixelRatio=a.devicePixelRatio;switch(a.specialFxType){case "desaturate":Pixastic.process(this,"desaturate",c,y);break;case "blur":Pixastic.process(this,"blurfast",c,y);break;case "glow":Pixastic.process(this,"glow",c,y);break;case "sepia":Pixastic.process(this,"sepia",y);break;case "laplace_dark":Pixastic.process(this,"laplace",c,y);break;case "laplace_light":Pixastic.process(this,
"laplace",c,y)}}d(this).off("load")},y=function(b,c){if(!1===b){var e=d(c);e.siblings(".jig-cw-role-effect").remove();e.remove()}else if(b=d(b),"hovered"===a.specialFx?b.css("opacity",a.hiddenOpacity):b.css("opacity",a.specialFxBlend),b.addClass("jig-specialfx-complete"),"captions"==a.specialFx){e=b.closest(".jig-imageContainer").find(".jig-cw-role-effect");if("no"==a.captionMatchWidth)b.appendTo(e);else try{var f=b[0].toDataURL("image/jpeg"),h=b.css("width")+" "+b.css("height");b.remove();e.find(".jig-caption-title").css({"background-image":"url("+
f+")","background-size":h});e.find(".jig-caption-description").css({"background-image":"url("+f+")","background-size":h})}catch(g){a.captionMatchWidthForceNo=!0,f=b.closest(".jig-imageContainer"),f.find(".jig-cw-role-effect .jig-caption").remove(),f.find(".jig-caption-title").css({display:"block"}),b.appendTo(e)}K(J(e))}},J=function(b,c){var e={};e.roleEffect=b.eq(0).closest(".jig-caption-wrapper");if(0===e.roleEffect.length)return!1;if("no"==a.captionMatchWidth||a.captionMatchWidthForceNo)e.roleEffect.hasClass("jig-cw-role-effect")?
e.roleReal=e.roleEffect.siblings(".jig-cw-role-real"):(e.roleReal=e.roleEffect,e.roleEffect=e.roleEffect.siblings(".jig-cw-role-effect")),c&&(e.fadeZeroHeight=c),e.captionElement=e.roleReal.find(".jig-caption");else{e.roleEffect=e.roleEffect.filter(".jig-cw-role-effect");if(!e.roleEffect.hasClass("jig-cw-role-effect"))return!1;e.img=e.roleEffect.siblings("img");e.captionTitle=e.roleEffect.find(".jig-caption-title");e.captionDescription=e.roleEffect.find(".jig-caption-description")}return e},K=function(b){if(!1===
b)return!1;if("no"==a.captionMatchWidth||a.captionMatchWidthForceNo){var c=b.roleReal.position();0!==b.roleReal.height()?(b.roleEffect.css({height:b.captionElement.height()+"px"}).find(".jig-pixastic").css({top:-c.top+"px"}),b.fadeZeroHeight&&b.roleEffect.css({opacity:b.captionElement.css("opacity")})):b.roleEffect.find(".jig-pixastic").css({top:-c.top+"px"})}else{var c=b.roleEffect.position(),e=b.captionTitle.position(),d=b.captionDescription.position(),h=parseInt(b.img.css("margin-left"),10);e&&
b.captionTitle.css({"background-position":h-e.left+"px "+-c.top+"px"});d&&b.captionDescription.css({"background-position":h+"px "+(-d.top-c.top)+"px"})}},M=function(b,c){var e=b.find(".jig-caption-wrapper"),d=e.find(".jig-caption-title"),e=e.find(".jig-caption-description"),h=a.captionHeight,g={remove:" -,;.!?".split(""),noEllipsis:[]};c&&(0!==d.length&&d.triggerHandler("isTruncated.dot")&&d.trigger("destroy.dot"),0!==e.length&&e.triggerHandler("isTruncated.dot")&&e.trigger("destroy.dot"));0!==d.length&&
(d.outerHeight()>a.captionHeight&&d.dotdotdot({height:a.captionHeight-(d.outerHeight()-d.height()),lastCharacter:g}),h-=d.outerHeight());0!==e.length&&e.outerHeight(!0)>h&&e.dotdotdot({height:h-(e.outerHeight()-e.height()),lastCharacter:g})};a.errorChecked=!1;var R=function(){0<d(".jig-unloadable").length&&(a.errorChecked=!0,a.element.find(".jig-unloadable").remove(),w.createGallery("errorCheck"))};w.init()};d.fn.justifiedImageGrid=function(v){return this.each(function(){if(void 0===d(this).data("justifiedImageGrid")){var z=
new d.justifiedImageGrid(this,v);d(this).data("justifiedImageGrid",z)}})};d.fn.hoverFlow=function(v,z,q,l,t){if(-1==d.inArray(v,["mouseover","mouseenter","mouseout","mouseleave"]))return this;var r="object"===typeof q?q:{complete:t||!t&&l||d.isFunction(q)&&q,duration:q,easing:t&&l||l&&!d.isFunction(l)&&l};r.queue=!1;var k=r.complete;r.complete=function(){d(this).dequeue();d.isFunction(k)&&k.call(this)};return this.each(function(){var k=d(this);"mouseover"==v||"mouseenter"==v?k.data("jQuery.hoverFlow",
!0):k.removeData("jQuery.hoverFlow");k.queue(function(){("mouseover"==v||"mouseenter"==v?void 0!==k.data("jQuery.hoverFlow"):void 0===k.data("jQuery.hoverFlow"))?k.animate(z,r):k.queue([])})})};(function(d){var z=function(d,l){return d-l},q=function(d){4===d.length&&(d=d.replace(/(\w)(\w)(\w)/gi,"$1$1$2$2$3$3"));d=/(\w{2})(\w{2})(\w{2})/.exec(d);return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]},l=function(d){return"#"+jQuery.map(d,function(d){d=d.toString(16);return d=1===d.length?"0"+
d:d}).join("")},t=function(d,l){return jQuery.map(q(d.end),function(a,r){return(a-q(d.start)[r])/l})},r=function(d,w,a){d=jQuery.map(q(d.start),function(d,k){var l=Math.round(d+w[k]*a);255<l?l=255:0>l&&(l=0);return l});return l(d)};d.fn.tagcloud=function(k){var l=d.extend({},d.fn.tagcloud.defaults,k);k=this.map(function(){return d(this).attr("rel")});k=jQuery.makeArray(k).sort(z);var a=k[0];k=k.pop()-a;0===k&&(k=1);var q,D;l.size&&(q=(l.size.end-l.size.start)/k);l.color&&(D=t(l.color,k));return this.each(function(){var k=
d(this).attr("rel")-a;l.size&&d(this).css({"font-size":l.size.start+k*q+l.size.unit});l.color&&d(this).css({color:r(l.color,D,k)})})};d.fn.tagcloud.defaults={size:{start:14,end:18,unit:"pt"}}})(jQuery);d.JIGminVersion=function(v,z){if(v){var q=d().jquery,l=v.split("."),t=q.split("."),q=[],r=[],k=!1;q[0]=isNaN(parseInt(l[0],10))?0:parseInt(l[0],10);q[1]=isNaN(parseInt(l[1],10))?0:parseInt(l[1],10);q[2]=isNaN(parseInt(l[2],10))?0:parseInt(l[2],10);q[3]=isNaN(parseInt(l[3],10))?0:parseInt(l[3],10);r[0]=
isNaN(parseInt(t[0],10))?0:parseInt(t[0],10);r[1]=isNaN(parseInt(t[1],10))?0:parseInt(t[1],10);r[2]=isNaN(parseInt(t[2],10))?0:parseInt(t[2],10);r[3]=isNaN(parseInt(t[3],10))?0:parseInt(t[3],10);for(l=0;4>l;l++)if(q[l]<=r[l]){if(k=!0,q[l]!=r[l])break}else{k=!1;break}if(!0===k)return!0;!0===z&&d(".justified-image-grid").html('<span style="color:red;font-weight:bold">Your jQuery version ('+d().jquery+") is old, this plugin needs at least 1.7, please go to the plugin settings and choose another jQuery source. If this does not work then your theme or a plugin is not using WordPress best practices and forces the loading of an old version. In that case contact the author of Justified Image Grid.</span>")}return!1}}
(function(){loadJustifiedImageGrid(jQuery)})();