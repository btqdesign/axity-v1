var AjaxGetCore=function(e){var t=wpbackitup_local[e];return jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"wp-backitup_"+e,security:t},dataType:"json"})},AjaxPostCore=function(e,t){var t=t||{};return t.action="wp-backitup_"+e,t.security=wpbackitup_local[e],jQuery.ajax({url:ajaxurl,type:"POST",data:t,dataType:"json"})};Vue.use(PrettyCheckbox),Vue.component("schedule-modal",{template:"#schedule-modal-template",props:{},data:function(){return{name:"",startDate:null,frequency:"day",repeatOn:"",timePicker:null,days:[!1,!1,!1,!1,!1,!1,!1],frequencyStrings:[{value:"day",label:"day"},{value:"week",label:"week"},{value:"month",label:"month"}],monthlyStrings:[],monthlyValue:30,enabled:!1,scheduleAlert:!1,scheduleErrorAlert:!1}},methods:{openModal:function(e){this.$refs[e].open()},closeModal:function(e){this.$refs[e].close()},getBackupSchedules:function(){AjaxGetCore("get_backup_schedule").then(function(e){e.success&&(this.name=e.data.name,this.frequency=e.data.frequency,this.enabled=e.data.enabled,this.startDate=new Date(1e3*Number(e.data.start_date)),"day"===this.frequency&&(this.timePicker=e.data.start_time),"month"===this.frequency&&(this.monthlyValue=e.data.day,this.timePicker=e.data.start_time),"week"===this.frequency&&(this.days=e.data.days,this.timePicker=e.data.start_time))}.bind(this))},setBackupSchedules:function(){data={data:{name:this.name,frequency:this.frequency,start_date:this.startDate,start_time:this.timePicker,days:this.days,repeat_on:this.monthlyValue,enabled:this.enabled}},AjaxPostCore("set_backup_schedule",data).then(function(e){e.success?(this.scheduleAlert=!0,this.scheduleErrorAlert=!1):(this.scheduleAlert=!1,this.scheduleErrorAlert=!0)}.bind(this))}},computed:{},mounted:function(){dayInMonth=new Date((new Date).getFullYear(),(new Date).getMonth(),0).getDate(),this.monthlyStrings=Array.apply(null,{length:dayInMonth}).map(function(e,t){return{value:t+1,label:"on day "+(t+1)}}),this.monthlyStrings.push({value:99,label:"last day of month"}),this.getBackupSchedules()}});